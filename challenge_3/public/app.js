class App extends React.Component {
  constructor() {
    super(); // 0 = homepage, 1 = F1, 2 = F2, 3 = F3

    this.state = {
      formState: 0,
      name: '',
      email: '',
      password: '',
      street: '',
      city: '',
      state: '',
      zipcode: '',
      creditCard: '',
      expiryDate: '',
      CVV: '',
      billingZipcode: ''
    };
    this.handleFormState = this.handleFormState.bind(this);
  } //update state function


  handleFormState(stateObj) {
    this.setState(stateObj);
  }

  render() {
    return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement(FormHandler, {
      details: this.state,
      formState: this.state.formState,
      handleFormState: this.handleFormState
    }));
  }

} //********************* FormHandler Render *****************************/


class FormHandler extends React.Component {
  constructor(props) {
    super(props);
  }

  render() {
    if (this.props.formState === 0) {
      return /*#__PURE__*/React.createElement(Homepage, {
        handleFormState: this.props.handleFormState
      });
    }

    if (this.props.formState === 1) {
      return /*#__PURE__*/React.createElement(F1, {
        handleFormState: this.props.handleFormState
      });
    }

    if (this.props.formState === 2) {
      return /*#__PURE__*/React.createElement(F2, {
        details: this.props.details,
        handleFormState: this.props.handleFormState
      });
    }

    if (this.props.formState === 3) {
      return /*#__PURE__*/React.createElement(F3, {
        details: this.props.details,
        handleFormState: this.props.handleFormState
      });
    }

    if (this.props.formState === 4) {
      return /*#__PURE__*/React.createElement(Purchased, {
        details: this.props.details,
        handleFormState: this.props.handleFormState
      });
    }
  }

} //********************* Homepage *****************************/


class Homepage extends React.Component {
  constructor(props) {
    super(props);
  }

  render() {
    return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("h1", null, "HomePage!"), /*#__PURE__*/React.createElement("button", {
      onClick: () => {
        this.props.handleFormState({
          formState: 1
        });
      }
    }, "Checkout"));
  }

} //********************* F1 *****************************/


class F1 extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      name: '',
      email: '',
      password: '',
      formState: 2
    };
    this.handleChange = this.handleChange.bind(this);
    this.handleSubmit = this.handleSubmit.bind(this);
  }

  handleSubmit(event) {
    // axios post request
    event.preventDefault();
    axios({
      method: 'post',
      url: 'http://localhost:3000/details/',
      data: {
        name: this.state.name,
        email: this.state.email,
        password: this.state.password
      }
    }).then(response => {
      console.log('Client sucess');
      this.props.handleFormState(this.state);
    }).catch(err => console.log(err));
  }

  handleChange(event) {
    console.log(event.target.name);
    this.setState({
      [event.target.name]: event.target.value
    });
  }

  render() {
    return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("h1", null, "User Details: f1"), /*#__PURE__*/React.createElement("form", {
      onSubmit: this.handleSubmit
    }, /*#__PURE__*/React.createElement("label", null, "Name:", /*#__PURE__*/React.createElement("input", {
      type: "text",
      name: "name",
      onChange: this.handleChange
    })), /*#__PURE__*/React.createElement("label", null, "Email:", /*#__PURE__*/React.createElement("input", {
      type: "text",
      name: "email",
      onChange: this.handleChange
    })), /*#__PURE__*/React.createElement("label", null, "Password:", /*#__PURE__*/React.createElement("input", {
      type: "text",
      name: "password",
      onChange: this.handleChange
    }))), /*#__PURE__*/React.createElement("button", {
      onClick: this.handleSubmit
    }, "Next"));
  }

} //********************* F2 *****************************/


class F2 extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      street: '',
      city: '',
      state: '',
      zipcode: '',
      formState: 3
    };
    this.handleChange = this.handleChange.bind(this);
    this.handleSubmit = this.handleSubmit.bind(this);
  }

  handleSubmit(event) {
    // axios post request
    event.preventDefault();
    axios({
      method: 'put',
      url: 'http://localhost:3000/details/',
      data: {
        street: this.state.street,
        city: this.state.city,
        state: this.state.state,
        zipcode: this.state.zipcode,
        name: this.props.details.name
      }
    }).then(response => {
      console.log('Client PUT sucess');
      this.props.handleFormState(this.state);
    }).catch(err => console.log('Put', err));
  }

  handleChange(event) {
    console.log(event.target.name);
    this.setState({
      [event.target.name]: event.target.value
    });
  }

  render() {
    return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("h1", null, "Address Details: f2"), /*#__PURE__*/React.createElement("form", {
      onSubmit: this.handleSubmit
    }, /*#__PURE__*/React.createElement("label", null, "Street:", /*#__PURE__*/React.createElement("input", {
      type: "text",
      name: "street",
      onChange: this.handleChange
    })), /*#__PURE__*/React.createElement("label", null, "City:", /*#__PURE__*/React.createElement("input", {
      type: "text",
      name: "city",
      onChange: this.handleChange
    })), /*#__PURE__*/React.createElement("label", null, "State:", /*#__PURE__*/React.createElement("input", {
      type: "text",
      name: "state",
      onChange: this.handleChange
    })), /*#__PURE__*/React.createElement("label", null, "Zipcode:", /*#__PURE__*/React.createElement("input", {
      type: "text",
      name: "zipcode",
      onChange: this.handleChange
    }))), /*#__PURE__*/React.createElement("button", {
      onClick: this.handleSubmit
    }, "Next"));
  }

} //********************* F3 *****************************/


class F3 extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      creditCard: '',
      expiryDate: '',
      CVV: '',
      billingZipcode: '',
      formState: 4
    };
    this.handleChange = this.handleChange.bind(this);
    this.handleSubmit = this.handleSubmit.bind(this);
  }

  handleSubmit(event) {
    // axios post request
    event.preventDefault();
    axios({
      method: 'put',
      url: 'http://localhost:3000/details/',
      data: {
        creditCard: this.state.street,
        expiryDate: this.state.city,
        CVV: this.state.state,
        billingZipcode: this.state.zipcode,
        name: this.props.details.name
      }
    }).then(response => {
      console.log('Client PUT sucess');
      this.props.handleFormState(this.state);
    }).catch(err => console.log('Put', err));
  }

  handleChange(event) {
    console.log(event.target.name);
    this.setState({
      [event.target.name]: event.target.value
    });
  }

  render() {
    return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("h1", null, "Credit Card Details: f3"), /*#__PURE__*/React.createElement("form", {
      onSubmit: this.handleSubmit
    }, /*#__PURE__*/React.createElement("label", null, "Credit Card Number:", /*#__PURE__*/React.createElement("input", {
      type: "text",
      name: "creditCard",
      onChange: this.handleChange
    })), /*#__PURE__*/React.createElement("label", null, "Expiration Date:", /*#__PURE__*/React.createElement("input", {
      type: "text",
      name: "expiryDate",
      onChange: this.handleChange
    })), /*#__PURE__*/React.createElement("label", null, "CVV:", /*#__PURE__*/React.createElement("input", {
      type: "text",
      name: "CVV",
      onChange: this.handleChange
    })), /*#__PURE__*/React.createElement("label", null, "Billing Zipcode:", /*#__PURE__*/React.createElement("input", {
      type: "text",
      name: "billingZipcode",
      onChange: this.handleChange
    }))), /*#__PURE__*/React.createElement("button", {
      onClick: this.handleSubmit
    }, "Next"));
  }

} //********************* Confirmation *****************************/


class Purchased extends React.Component {
  constructor(props) {
    super(props);
    this.state = {};
    this.handleSubmit = this.handleSubmit.bind(this);
  }

  componentDidMount() {
    axios({
      method: 'get',
      url: 'http://localhost:3000/details/',
      params: {
        name: this.props.details.name
      }
    }).then(response => {
      console.log("WOOT", response.data);
      this.setState({
        details: response.data
      });
    });
  }

  handleSubmit(event) {
    event.preventDefault();
    this.props.handleFormState({
      formState: 0
    });
  }

  render() {
    return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("h1", null, "Confirmation!"), /*#__PURE__*/React.createElement("h4", null, this.state.details.name), /*#__PURE__*/React.createElement("button", {
      onClick: this.handleSubmit
    }, "Purchased"));
  }

}

ReactDOM.render( /*#__PURE__*/React.createElement(App, null), document.getElementById('app'));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2NsaWVudC9hcHAuanN4Il0sIm5hbWVzIjpbIkFwcCIsIlJlYWN0IiwiQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJzdGF0ZSIsImZvcm1TdGF0ZSIsIm5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwic3RyZWV0IiwiY2l0eSIsInppcGNvZGUiLCJjcmVkaXRDYXJkIiwiZXhwaXJ5RGF0ZSIsIkNWViIsImJpbGxpbmdaaXBjb2RlIiwiaGFuZGxlRm9ybVN0YXRlIiwiYmluZCIsInN0YXRlT2JqIiwic2V0U3RhdGUiLCJyZW5kZXIiLCJGb3JtSGFuZGxlciIsInByb3BzIiwiZGV0YWlscyIsIkhvbWVwYWdlIiwiRjEiLCJoYW5kbGVDaGFuZ2UiLCJoYW5kbGVTdWJtaXQiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiYXhpb3MiLCJtZXRob2QiLCJ1cmwiLCJkYXRhIiwidGhlbiIsInJlc3BvbnNlIiwiY29uc29sZSIsImxvZyIsImNhdGNoIiwiZXJyIiwidGFyZ2V0IiwidmFsdWUiLCJGMiIsIkYzIiwiUHVyY2hhc2VkIiwiY29tcG9uZW50RGlkTW91bnQiLCJwYXJhbXMiLCJSZWFjdERPTSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiXSwibWFwcGluZ3MiOiJBQUNBLE1BQU1BLEdBQU4sU0FBa0JDLEtBQUssQ0FBQ0MsU0FBeEIsQ0FBa0M7QUFDaENDLEVBQUFBLFdBQVcsR0FBRztBQUNaLFlBRFksQ0FFWjs7QUFDQSxTQUFLQyxLQUFMLEdBQWE7QUFDWEMsTUFBQUEsU0FBUyxFQUFFLENBREE7QUFFWEMsTUFBQUEsSUFBSSxFQUFFLEVBRks7QUFHWEMsTUFBQUEsS0FBSyxFQUFFLEVBSEk7QUFJWEMsTUFBQUEsUUFBUSxFQUFFLEVBSkM7QUFLWEMsTUFBQUEsTUFBTSxFQUFFLEVBTEc7QUFNWEMsTUFBQUEsSUFBSSxFQUFFLEVBTks7QUFPWE4sTUFBQUEsS0FBSyxFQUFFLEVBUEk7QUFRWE8sTUFBQUEsT0FBTyxFQUFFLEVBUkU7QUFTWEMs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QUFLZ0IsS0FBTCxDQUFXQyxPQUFYLENBQW1CakI7QUFEbkI7QUFISixLQUFELENBQUwsQ0FPQzRCLElBUEQsQ0FPT0MsUUFBRCxJQUFjO0FBQ2xCQyxNQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxNQUFaLEVBQW9CRixRQUFRLENBQUNGLElBQTdCO0FBQ0EsV0FBS2QsUUFBTCxDQUFjO0FBQUNJLFFBQUFBLE9BQU8sRUFBRVksUUFBUSxDQUFDRjtBQUFuQixPQUFkO0FBQ0QsS0FWRDtBQVdEOztBQUNETixFQUFBQSxZQUFZLENBQUNDLEtBQUQsRUFBUTtBQUNsQkEsSUFBQUEsS0FBSyxDQUFDQyxjQUFOO0FBQ0EsU0FBS1AsS0FBTCxDQUFXTixlQUFYLENBQTJCO0FBQUNYLE1BQUFBLFNBQVMsRUFBRTtBQUFaLEtBQTNCO0FBQ0Q7O0FBQ0RlLEVBQUFBLE1BQU0sR0FBRztBQUNQLHdCQUNFLDhDQUNFLGdEQURGLGVBRUUsZ0NBQUssS0FBS2hCLEtBQUwsQ0FBV21CLE9BQVgsQ0FBbUJqQixJQUF4QixDQUZGLGVBR0U7QUFBUSxNQUFBLE9BQU8sRUFBRSxLQUFLcUI7QUFBdEIsbUJBSEYsQ0FERjtBQU9EOztBQW5DcUM7O0FBdUN4Q29CLFFBQVEsQ0FBQzNCLE1BQVQsZUFBZ0Isb0JBQUMsR0FBRCxPQUFoQixFQUF5QjRCLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixLQUF4QixDQUF6QiIsInNvdXJjZXNDb250ZW50IjpbIlxuY2xhc3MgQXBwIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICAvLyAwID0gaG9tZXBhZ2UsIDEgPSBGMSwgMiA9IEYyLCAzID0gRjNcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgZm9ybVN0YXRlOiAwLFxuICAgICAgbmFtZTogJycsXG4gICAgICBlbWFpbDogJycsXG4gICAgICBwYXNzd29yZDogJycsXG4gICAgICBzdHJlZXQ6ICcnLFxuICAgICAgY2l0eTogJycsXG4gICAgICBzdGF0ZTogJycsXG4gICAgICB6aXBjb2RlOiAnJyxcbiAgICAgIGNyZWRpdENhcmQ6ICcnLFxuICAgICAgZXhwaXJ5RGF0ZTogJycsXG4gICAgICBDVlY6ICcnLFxuICAgICAgYmlsbGluZ1ppcGNvZGU6ICcnLFxuICAgIH1cblxuICAgIHRoaXMuaGFuZGxlRm9ybVN0YXRlID0gdGhpcy5oYW5kbGVGb3JtU3RhdGUuYmluZCh0aGlzKTtcbiAgfVxuICAvL3VwZGF0ZSBzdGF0ZSBmdW5jdGlvblxuICBoYW5kbGVGb3JtU3RhdGUoc3RhdGVPYmopIHtcbiAgICB0aGlzLnNldFN0YXRlKHN0YXRlT2JqKVxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2PlxuICAgICAgICA8Rm9ybUhhbmRsZXIgZGV0YWlscz17dGhpcy5zdGF0ZX0gZm9ybVN0YXRlPXt0aGlzLnN0YXRlLmZvcm1TdGF0ZX0gaGFuZGxlRm9ybVN0YXRlPXt0aGlzLmhhbmRsZUZvcm1TdGF0ZX0vPlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG5cblxuXG4vLyoqKioqKioqKioqKioqKioqKioqKiBGb3JtSGFuZGxlciBSZW5kZXIgKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbmNsYXNzIEZvcm1IYW5kbGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuZm9ybVN0YXRlID09PSAwKSB7XG4gICAgICByZXR1cm4gPEhvbWVwYWdlIGhhbmRsZUZvcm1TdGF0ZT17dGhpcy5wcm9wcy5oYW5kbGVGb3JtU3RhdGV9Lz47XG4gICAgfVxuICAgIGlmICh0aGlzLnByb3BzLmZvcm1TdGF0ZSA9PT0gMSkge1xuICAgICAgcmV0dXJuIDxGMSBoYW5kbGVGb3JtU3RhdGU9e3RoaXMucHJvcHMuaGFuZGxlRm9ybVN0YXRlfS8+O1xuICAgIH1cbiAgICBpZiAodGhpcy5wcm9wcy5mb3JtU3RhdGUgPT09IDIpIHtcbiAgICAgIHJldHVybiA8RjIgZGV0YWlscz17dGhpcy5wcm9wcy5kZXRhaWxzfSBoYW5kbGVGb3JtU3RhdGU9e3RoaXMucHJvcHMuaGFuZGxlRm9ybVN0YXRlfS8+O1xuICAgIH1cbiAgICBpZiAodGhpcy5wcm9wcy5mb3JtU3RhdGUgPT09IDMpIHtcbiAgICAgIHJldHVybiA8RjMgZGV0YWlscz17dGhpcy5wcm9wcy5kZXRhaWxzfSBoYW5kbGVGb3JtU3RhdGU9e3RoaXMucHJvcHMuaGFuZGxlRm9ybVN0YXRlfS8+O1xuICAgIH1cbiAgICBpZiAodGhpcy5wcm9wcy5mb3JtU3RhdGUgPT09IDQpIHtcbiAgICAgIHJldHVybiA8UHVyY2hhc2VkIGRldGFpbHM9e3RoaXMucHJvcHMuZGV0YWlsc30gaGFuZGxlRm9ybVN0YXRlPXt0aGlzLnByb3BzLmhhbmRsZUZvcm1TdGF0ZX0vPjtcbiAgICB9XG4gIH1cbn1cblxuLy8qKioqKioqKioqKioqKioqKioqKiogSG9tZXBhZ2UgKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbmNsYXNzIEhvbWVwYWdlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXY+XG4gICAgICAgIDxoMT5Ib21lUGFnZSE8L2gxPlxuICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHt0aGlzLnByb3BzLmhhbmRsZUZvcm1TdGF0ZSh7Zm9ybVN0YXRlOiAxfSl9fT5DaGVja291dDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG5cbi8vKioqKioqKioqKioqKioqKioqKioqIEYxICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5jbGFzcyBGMSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBuYW1lOiAnJyxcbiAgICAgIGVtYWlsOiAnJyxcbiAgICAgIHBhc3N3b3JkOiAnJyxcbiAgICAgIGZvcm1TdGF0ZTogMixcbiAgICB9XG5cbiAgICB0aGlzLmhhbmRsZUNoYW5nZSA9IHRoaXMuaGFuZGxlQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5oYW5kbGVTdWJtaXQgPSB0aGlzLmhhbmRsZVN1Ym1pdC5iaW5kKHRoaXMpO1xuICB9XG5cbiAgaGFuZGxlU3VibWl0KGV2ZW50KSB7XG4gICAgLy8gYXhpb3MgcG9zdCByZXF1ZXN0XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBheGlvcyh7XG4gICAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICAgIHVybDonaHR0cDovL2xvY2FsaG9zdDozMDAwL2RldGFpbHMvJyxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgbmFtZTogdGhpcy5zdGF0ZS5uYW1lLFxuICAgICAgICBlbWFpbDogdGhpcy5zdGF0ZS5lbWFpbCxcbiAgICAgICAgcGFzc3dvcmQ6IHRoaXMuc3RhdGUucGFzc3dvcmQsXG4gICAgICB9XG4gICAgfSlcbiAgICAudGhlbiAoKHJlc3BvbnNlKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnQ2xpZW50IHN1Y2VzcycpO1xuICAgICAgdGhpcy5wcm9wcy5oYW5kbGVGb3JtU3RhdGUodGhpcy5zdGF0ZSlcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgfVxuXG4gIGhhbmRsZUNoYW5nZShldmVudCkge1xuICAgIGNvbnNvbGUubG9nKGV2ZW50LnRhcmdldC5uYW1lKTtcbiAgICB0aGlzLnNldFN0YXRlKHtbZXZlbnQudGFyZ2V0Lm5hbWVdOiBldmVudC50YXJnZXQudmFsdWV9KVxuXG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXY+XG4gICAgICAgIDxoMT5Vc2VyIERldGFpbHM6IGYxPC9oMT5cbiAgICAgICAgPGZvcm0gb25TdWJtaXQ9e3RoaXMuaGFuZGxlU3VibWl0fT5cbiAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICBOYW1lOlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cIm5hbWVcIiBvbkNoYW5nZT17dGhpcy5oYW5kbGVDaGFuZ2V9Lz5cbiAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgIEVtYWlsOlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImVtYWlsXCIgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ2hhbmdlfS8+XG4gICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICBQYXNzd29yZDpcbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJwYXNzd29yZFwiIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUNoYW5nZX0vPlxuICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgIDwvZm9ybT5cbiAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXt0aGlzLmhhbmRsZVN1Ym1pdH0+TmV4dDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG5cbi8vKioqKioqKioqKioqKioqKioqKioqIEYyICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5jbGFzcyBGMiBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBzdHJlZXQ6ICcnLFxuICAgICAgY2l0eTogJycsXG4gICAgICBzdGF0ZTogJycsXG4gICAgICB6aXBjb2RlOiAnJyxcbiAgICAgIGZvcm1TdGF0ZTogMyxcbiAgICB9XG5cbiAgICB0aGlzLmhhbmRsZUNoYW5nZSA9IHRoaXMuaGFuZGxlQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5oYW5kbGVTdWJtaXQgPSB0aGlzLmhhbmRsZVN1Ym1pdC5iaW5kKHRoaXMpO1xuICB9XG5cbiAgaGFuZGxlU3VibWl0KGV2ZW50KSB7XG4gICAgLy8gYXhpb3MgcG9zdCByZXF1ZXN0XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBheGlvcyh7XG4gICAgICBtZXRob2Q6ICdwdXQnLFxuICAgICAgdXJsOidodHRwOi8vbG9jYWxob3N0OjMwMDAvZGV0YWlscy8nLFxuICAgICAgZGF0YToge1xuICAgICAgICBzdHJlZXQ6IHRoaXMuc3RhdGUuc3RyZWV0LFxuICAgICAgICBjaXR5OiB0aGlzLnN0YXRlLmNpdHksXG4gICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLnN0YXRlLFxuICAgICAgICB6aXBjb2RlOiB0aGlzLnN0YXRlLnppcGNvZGUsXG4gICAgICAgIG5hbWU6IHRoaXMucHJvcHMuZGV0YWlscy5uYW1lLFxuICAgICAgfVxuICAgIH0pXG4gICAgLnRoZW4gKChyZXNwb25zZSkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ0NsaWVudCBQVVQgc3VjZXNzJyk7XG4gICAgICB0aGlzLnByb3BzLmhhbmRsZUZvcm1TdGF0ZSh0aGlzLnN0YXRlKVxuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKCdQdXQnLCBlcnIpKTtcbiAgfVxuXG4gIGhhbmRsZUNoYW5nZShldmVudCkge1xuICAgIGNvbnNvbGUubG9nKGV2ZW50LnRhcmdldC5uYW1lKTtcbiAgICB0aGlzLnNldFN0YXRlKHtbZXZlbnQudGFyZ2V0Lm5hbWVdOiBldmVudC50YXJnZXQudmFsdWV9KVxuXG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXY+XG4gICAgICAgIDxoMT5BZGRyZXNzIERldGFpbHM6IGYyPC9oMT5cbiAgICAgICAgPGZvcm0gb25TdWJtaXQ9e3RoaXMuaGFuZGxlU3VibWl0fT5cbiAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICBTdHJlZXQ6XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwic3RyZWV0XCIgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ2hhbmdlfS8+XG4gICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICBDaXR5OlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImNpdHlcIiBvbkNoYW5nZT17dGhpcy5oYW5kbGVDaGFuZ2V9Lz5cbiAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgIFN0YXRlOlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInN0YXRlXCIgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ2hhbmdlfS8+XG4gICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICBaaXBjb2RlOlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInppcGNvZGVcIiBvbkNoYW5nZT17dGhpcy5oYW5kbGVDaGFuZ2V9Lz5cbiAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICA8L2Zvcm0+XG4gICAgICAgIDxidXR0b24gb25DbGljaz17dGhpcy5oYW5kbGVTdWJtaXR9Pk5leHQ8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxufVxuXG4vLyoqKioqKioqKioqKioqKioqKioqKiBGMyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuY2xhc3MgRjMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgY3JlZGl0Q2FyZDogJycsXG4gICAgICBleHBpcnlEYXRlOiAnJyxcbiAgICAgIENWVjogJycsXG4gICAgICBiaWxsaW5nWmlwY29kZTogJycsXG4gICAgICBmb3JtU3RhdGU6IDQsXG4gICAgfVxuXG4gICAgdGhpcy5oYW5kbGVDaGFuZ2UgPSB0aGlzLmhhbmRsZUNoYW5nZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaGFuZGxlU3VibWl0ID0gdGhpcy5oYW5kbGVTdWJtaXQuYmluZCh0aGlzKTtcbiAgfVxuXG4gIGhhbmRsZVN1Ym1pdChldmVudCkge1xuICAgIC8vIGF4aW9zIHBvc3QgcmVxdWVzdFxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgYXhpb3Moe1xuICAgICAgbWV0aG9kOiAncHV0JyxcbiAgICAgIHVybDonaHR0cDovL2xvY2FsaG9zdDozMDAwL2RldGFpbHMvJyxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgY3JlZGl0Q2FyZDogdGhpcy5zdGF0ZS5zdHJlZXQsXG4gICAgICAgIGV4cGlyeURhdGU6IHRoaXMuc3RhdGUuY2l0eSxcbiAgICAgICAgQ1ZWOiB0aGlzLnN0YXRlLnN0YXRlLFxuICAgICAgICBiaWxsaW5nWmlwY29kZTogdGhpcy5zdGF0ZS56aXBjb2RlLFxuICAgICAgICBuYW1lOiB0aGlzLnByb3BzLmRldGFpbHMubmFtZSxcbiAgICAgIH1cbiAgICB9KVxuICAgIC50aGVuICgocmVzcG9uc2UpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdDbGllbnQgUFVUIHN1Y2VzcycpO1xuICAgICAgdGhpcy5wcm9wcy5oYW5kbGVGb3JtU3RhdGUodGhpcy5zdGF0ZSlcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZygnUHV0JywgZXJyKSk7XG4gIH1cblxuICBoYW5kbGVDaGFuZ2UoZXZlbnQpIHtcbiAgICBjb25zb2xlLmxvZyhldmVudC50YXJnZXQubmFtZSk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7W2V2ZW50LnRhcmdldC5uYW1lXTogZXZlbnQudGFyZ2V0LnZhbHVlfSlcblxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2PlxuICAgICAgICA8aDE+Q3JlZGl0IENhcmQgRGV0YWlsczogZjM8L2gxPlxuICAgICAgICA8Zm9ybSBvblN1Ym1pdD17dGhpcy5oYW5kbGVTdWJtaXR9PlxuICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgIENyZWRpdCBDYXJkIE51bWJlcjpcbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJjcmVkaXRDYXJkXCIgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ2hhbmdlfS8+XG4gICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICBFeHBpcmF0aW9uIERhdGU6XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwiZXhwaXJ5RGF0ZVwiIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUNoYW5nZX0vPlxuICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgQ1ZWOlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cIkNWVlwiIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUNoYW5nZX0vPlxuICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgQmlsbGluZyBaaXBjb2RlOlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImJpbGxpbmdaaXBjb2RlXCIgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ2hhbmdlfS8+XG4gICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgPC9mb3JtPlxuICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RoaXMuaGFuZGxlU3VibWl0fT5OZXh0PC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cblxuXG4vLyoqKioqKioqKioqKioqKioqKioqKiBDb25maXJtYXRpb24gKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbmNsYXNzIFB1cmNoYXNlZCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG5cbiAgICB9XG5cbiAgICB0aGlzLmhhbmRsZVN1Ym1pdCA9IHRoaXMuaGFuZGxlU3VibWl0LmJpbmQodGhpcyk7XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBheGlvcyh7XG4gICAgICBtZXRob2Q6ICdnZXQnLFxuICAgICAgdXJsOidodHRwOi8vbG9jYWxob3N0OjMwMDAvZGV0YWlscy8nLFxuICAgICAgcGFyYW1zOiB7XG4gICAgICAgIG5hbWU6IHRoaXMucHJvcHMuZGV0YWlscy5uYW1lLFxuICAgICAgfVxuICAgIH0pXG4gICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhcIldPT1RcIiwgcmVzcG9uc2UuZGF0YSk7XG4gICAgICB0aGlzLnNldFN0YXRlKHtkZXRhaWxzOiByZXNwb25zZS5kYXRhfSlcbiAgICB9KVxuICB9XG4gIGhhbmRsZVN1Ym1pdChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5wcm9wcy5oYW5kbGVGb3JtU3RhdGUoe2Zvcm1TdGF0ZTogMH0pO1xuICB9XG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdj5cbiAgICAgICAgPGgxPkNvbmZpcm1hdGlvbiE8L2gxPlxuICAgICAgICA8aDQ+e3RoaXMuc3RhdGUuZGV0YWlscy5uYW1lfTwvaDQ+XG4gICAgICAgIDxidXR0b24gb25DbGljaz17dGhpcy5oYW5kbGVTdWJtaXR9PlB1cmNoYXNlZDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG5cblxuUmVhY3RET00ucmVuZGVyKDxBcHAgLz4sIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHAnKSk7Il19